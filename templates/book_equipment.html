{% extends 'base.html' %}

{% block content %}
<div class="mb-4">
    <h2>üé¨ –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞: "{{ project.title }}"</h2>
    <p class="text-muted">–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ —Å—ä–µ–º–æ–∫: {{ project.start_date }}</p>
    <a href="/projects" class="btn btn-outline-secondary btn-sm">‚Üê –ù–∞–∑–∞–¥ –∫ –ø—Ä–æ–µ–∫—Ç–∞–º</a>
</div>

<div class="card mb-4 shadow-sm">
    <div class="card-header bg-success text-white">
        <h5 class="mb-0">‚úÖ –¢–µ–∫—É—â–∞—è –±—Ä–æ–Ω—å (–ó–∞–Ω—è—Ç–æ)</h5>
    </div>
    <div class="card-body">
        {% if project.bookings %}
            <table class="table table-striped align-middle">
                <thead>
                    <tr>
                        <th>–î–∞—Ç–∞</th>
                        <th>–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ</th>
                        <th>–î–µ–π—Å—Ç–≤–∏–µ</th>
                    </tr>
                </thead>
                <tbody>
                    {% for booking in project.bookings %}
                    <tr>
                        <td>{{ booking.date.strftime('%d.%m.%Y') }}</td>
                        <td>
                            <strong>{{ booking.equipment.name }}</strong>
                            <br>
                            <small class="text-muted">{{ booking.equipment.type }}</small>
                        </td>
                        <td>
                            <form action="{{ url_for('delete_booking', booking_id=booking.id) }}" method="POST">
                                <button type="submit" class="btn btn-danger btn-sm">‚úï –û—Ç–º–µ–Ω–∏—Ç—å</button>
                            </form>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
            <p class="text-muted text-center py-3">–ü–æ–∫–∞ –Ω–∏—á–µ–≥–æ –Ω–µ –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–æ.</p>
        {% endif %}
    </div>
</div>

<div class="card shadow-sm">
    <div class="card-header bg-primary text-white">
        <h5 class="mb-0">‚ûï –î–æ–±–∞–≤–∏—Ç—å –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ</h5>
    </div>
    <div class="card-body">
        <form method="POST">
            
            <div class="row mb-3">
                <div class="col-md-4">
                    <label class="form-label fw-bold">–ù–∞ –∫–∞–∫—É—é –¥–∞—Ç—É?</label>
                    <input type="date" class="form-control" name="date" required>
                </div>
            </div>

            <div class="mb-3">
                <label class="form-label fw-bold">–í—ã–±–µ—Ä–∏—Ç–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ (–º–æ–∂–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ):</label>
                <div class="equipment-list" style="max-height: 300px; overflow-y: auto; border: 1px solid #dee2e6; padding: 10px; border-radius: 5px;">
                    {% for item in equipment %}
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="equipment" value="{{ item.id }}" id="eq_{{ item.id }}">
                        <label class="form-check-label" for="eq_{{ item.id }}">
                            {{ item.name }} 
                            
                            {% if item.type == 'camera' %} <span class="badge bg-primary ms-1">–ö–∞–º–µ—Ä–∞</span>
                            {% elif item.type == 'light' %} <span class="badge bg-warning text-dark ms-1">–°–≤–µ—Ç</span>
                            {% elif item.type == 'consumable' %} <span class="badge bg-info text-dark ms-1">–†–∞—Å—Ö–æ–¥–Ω–∏–∫</span>
                            {% elif item.type == 'prop' %} <span class="badge bg-secondary ms-1">–†–µ–∫–≤–∏–∑–∏—Ç</span>
                            {% elif item.type == 'other' %} <span class="badge bg-dark ms-1">–î—Ä—É–≥–æ–µ</span>
                            {% else %} <span class="badge bg-secondary ms-1">{{ item.type }}</span>
                            {% endif %}
                            
                        </label>
                    </div>
                    {% endfor %}
                </div>
            </div>

            <button type="submit" class="btn btn-success">–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω–æ–µ</button>
        </form>
    </div>
</div>
{% endblock %}